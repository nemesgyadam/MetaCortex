2025-04-26 15:20:06,602 - mcp.server.lowlevel.server - DEBUG - Initializing server 'wolt'
2025-04-26 15:20:06,602 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListToolsRequest
2025-04-26 15:20:06,603 - mcp.server.lowlevel.server - DEBUG - Registering handler for CallToolRequest
2025-04-26 15:20:06,603 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourcesRequest
2025-04-26 15:20:06,603 - mcp.server.lowlevel.server - DEBUG - Registering handler for ReadResourceRequest
2025-04-26 15:20:06,603 - mcp.server.lowlevel.server - DEBUG - Registering handler for PromptListRequest
2025-04-26 15:20:06,603 - mcp.server.lowlevel.server - DEBUG - Registering handler for GetPromptRequest
2025-04-26 15:20:06,603 - mcp.server.lowlevel.server - DEBUG - Registering handler for ListResourceTemplatesRequest
2025-04-26 15:20:06,626 - __main__ - INFO - Starting Wolt MCP server... Logging to console and C:\Code\MetaCortex_v1\wolt\logs\wolt_mcp_server_20250426_152006.log
2025-04-26 15:20:06,626 - __main__ - DEBUG - Using AUTH_TOKEN: ******
2025-04-26 15:20:06,626 - __main__ - DEBUG - Using SESSION_ID: 46d17e71-e323-460b-af03-7fc7c68ac653
2025-04-26 15:20:06,630 - asyncio - DEBUG - Using proactor: IocpProactor
2025-04-26 15:20:06,638 - mcp.server.lowlevel.server - DEBUG - Received message: root=InitializedNotification(method='notifications/initialized', params=NotificationParams(meta=None), jsonrpc='2.0')
2025-04-26 15:20:06,638 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x0000015CC6D4AE50>
2025-04-26 15:20:06,638 - mcp.server.lowlevel.server - INFO - Processing request of type ListToolsRequest
2025-04-26 15:20:06,639 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type ListToolsRequest
2025-04-26 15:20:06,639 - mcp.server.lowlevel.server - DEBUG - Response sent
2025-04-26 15:20:13,926 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x0000015CC6D34490>
2025-04-26 15:20:13,926 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-04-26 15:20:13,926 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2025-04-26 15:20:13,926 - __main__ - INFO - Making request to https://consumer-api.wolt.com/order-xp/v1/baskets
2025-04-26 15:20:13,926 - __main__ - DEBUG - Headers: {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36', 'Content-Type': 'application/json', 'Accept': 'application/json', 'Accept-Language': 'en', 'X-Client-Id': 'web', 'X-Session-Id': '46d17e71-e323-460b-af03-7fc7c68ac653', 'Authorization': 'Bearer eyJhbGciOiJFUzI1NiIsImtpZCI6IjY4MDMzZDU2MDAwMDAwMDAwMDAwMDAwMCIsInR5cCI6IngudXNlcitqd3QifQ.eyJhdWQiOlsiZGFhcy1wdWJsaWMtYXBpIiwiYWQtaW5zaWdodHMiLCJwYXltZW50cy10aXBzLXNlcnZpY2UiLCJ0b3B1cC1zZXJ2aWNlIiwic3VwcG9ydC1mdW5uZWwiLCJtZWFsLWJlbmVmaXRzLXNlcnZpY2UiLCJsb3lhbHR5LWdhdGV3YXkiLCJ3b2x0YXV0aCIsIm9yZGVyLXRyYWNraW5nIiwibG95YWx0eS1wcm9ncmFtLWFwaSIsImRpZmZ1c2lvbiIsIm9yZGVyLXhwIiwicmVzdGF1cmFudC1hcGkiLCJzdWJzY3JpcHRpb24tc2VydmljZSIsIndscy1jdXN0b21lci1zZXJ2aWNlIiwidmVudWUtY29udGVudC1hcGkiLCJnaWZ0LWNhcmQtc2hvcCIsImNvcnBvcmF0ZS1wb3J0YWwtYXBpIiwiaW50ZWdyYXRpb24tY29uZmlnLXNlcnZpY2UiLCJhY3Rpdml0eS1odWIiLCJyZXR1cm5zLWFwaSIsIndvbHQtY29tIiwiY291cmllcmNsaWVudCIsInBheW1lbnQtc2VydmljZSIsImNvbnZlcnNlLXdpZGdldC1jb25zdW1lciIsImUtd2FsbGV0LXNlcnZpY2UiLCJjb25zdW1lci1hc3NvcnRtZW50Il0sImlzcyI6IndvbHRhdXRoIiwianRpIjoiMGFmMGYwYTIyMjk5MTFmMDhiMGQ2MjliYTU5YzUwYTAiLCJ1c2VyIjp7ImlkIjoiNWU4YjI4YWFkY2UyY2RiODY0MmIzNTNkIiwibmFtZSI6eyJmaXJzdF9uYW1lIjoiTmVtZXMiLCJsYXN0X25hbWUiOiJcdTAwYzFkXHUwMGUxbSJ9LCJlbWFpbCI6Im5lbWVzZ3lhZGFtQGdtYWlsLmNvbSIsInJvbGVzIjpbInVzZXIiXSwiZW1haWxfdmVyaWZpZWQiOnRydWUsInbob25lX251bWJlcl92ZXJpZmllZCI6dHJ1ZSwiY291bnRyeSI6IkhVTiIsImxhbmd1YWdlIjoiaHUiLCJwcm9maWxlX3BpY3R1cmUiOnsidXJsIjoiaHR0cHM6Ly9jcmVkaXRvcm5vdG1lZGlhLnMzLmFtYXpvbmF3cy5jb20vZTFhYzQ3YmNmM2Q4ZTc0Y2JmMGI0NjAxZjA4MjFmODZmOWRlYzMyYjNmOTQxZWJmNzFkMWQ4Y2QwZGYxNDQ5YzNlNDdlODJlZDA4MDRlMTc0NmRlNjZhNjBkYmRmODUxYjQwNDliMDRhNWZmZGNkOGExN2MzMWQ3NTg3ODUzMGEifSwicGVybWlzc2lvbnMiOltdLCJwaG9uZV9udW1iZXIiOiIrMzYzMDYwMjY4MTgiLCJ0ZW5hbnQiOiJ3b2x0In0sImlhdCI6MTc0NTY3MDExNSwiZXhwIjoxNzQ1NjcxOTE1LCJhbXIiOltdfQ.G3eT7hMkkyE_f0dWMJibdUi_TlFlRYxjIYglHaNjgCrWHUuB3SD8pMxZK7yUU26LjD1CQLuI_tSa1YxZ0mbTqQ'}
2025-04-26 15:20:13,926 - __main__ - DEBUG - Request data: {'venue_id': '617bd8b17317edf628e3dd26', 'items': [{'id': '0edff4489301896552b7fb23', 'quantity': 1, 'price': 95000}], 'currency': 'HUF'}
2025-04-26 15:20:14,113 - httpcore.connection - DEBUG - connect_tcp.started host='consumer-api.wolt.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-04-26 15:20:14,141 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000015CC6DB9490>
2025-04-26 15:20:14,141 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000015CC7176E70> server_hostname='consumer-api.wolt.com' timeout=5.0
2025-04-26 15:20:14,158 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000015CC6DB89D0>
2025-04-26 15:20:14,158 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-04-26 15:20:14,158 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-26 15:20:14,158 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-04-26 15:20:14,158 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-26 15:20:14,159 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-04-26 15:20:14,241 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Content-Length', b'0'), (b'Connection', b'keep-alive'), (b'Date', b'Sat, 26 Apr 2025 13:20:14 GMT'), (b'X-Cache', b'Error from cloudfront'), (b'Via', b'1.1 b093bbe9e11537fd2eb2786c35b51cd2.cloudfront.net (CloudFront)'), (b'X-Amz-Cf-Pop', b'BUD50-P1'), (b'X-Amz-Cf-Id', b'HKtFDIDfQoxw0DNMkGIwhl2cp2hgz1PuUXZYEQtqValA2ifxHmM__A==')])
2025-04-26 15:20:14,241 - httpx - INFO - HTTP Request: POST https://consumer-api.wolt.com/order-xp/v1/baskets "HTTP/1.1 401 Unauthorized"
2025-04-26 15:20:14,241 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-04-26 15:20:14,241 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-26 15:20:14,241 - httpcore.http11 - DEBUG - response_closed.started
2025-04-26 15:20:14,241 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-26 15:20:14,241 - __main__ - INFO - Response status: 401
2025-04-26 15:20:14,241 - __main__ - INFO - Response headers: Headers({'content-length': '0', 'connection': 'keep-alive', 'date': 'Sat, 26 Apr 2025 13:20:14 GMT', 'x-cache': 'Error from cloudfront', 'via': '1.1 b093bbe9e11537fd2eb2786c35b51cd2.cloudfront.net (CloudFront)', 'x-amz-cf-pop': 'BUD50-P1', 'x-amz-cf-id': 'HKtFDIDfQoxw0DNMkGIwhl2cp2hgz1PuUXZYEQtqValA2ifxHmM__A=='})
2025-04-26 15:20:14,241 - __main__ - INFO - 
2025-04-26 15:20:14,241 - httpcore.connection - DEBUG - close.started
2025-04-26 15:20:14,243 - httpcore.connection - DEBUG - close.complete
2025-04-26 15:20:14,243 - __main__ - INFO - HTTP error: Client error '401 Unauthorized' for url 'https://consumer-api.wolt.com/order-xp/v1/baskets'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-04-26 15:20:14,244 - mcp.server.lowlevel.server - DEBUG - Response sent
2025-04-26 15:20:18,020 - mcp.server.lowlevel.server - DEBUG - Received message: <mcp.shared.session.RequestResponder object at 0x0000015CC6DAB450>
2025-04-26 15:20:18,020 - mcp.server.lowlevel.server - INFO - Processing request of type CallToolRequest
2025-04-26 15:20:18,021 - mcp.server.lowlevel.server - DEBUG - Dispatching request of type CallToolRequest
2025-04-26 15:20:18,021 - __main__ - INFO - Fetching restaurants near lat=47.497913, lon=19.040236
2025-04-26 15:20:18,028 - httpcore.connection - DEBUG - connect_tcp.started host='restaurant-api.wolt.com' port=443 local_address=None timeout=30.0 socket_options=None
2025-04-26 15:20:18,062 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000015CC6D35B50>
2025-04-26 15:20:18,063 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x0000015CC6CB6DE0> server_hostname='restaurant-api.wolt.com' timeout=30.0
2025-04-26 15:20:18,080 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000015CC6DBAC90>
2025-04-26 15:20:18,081 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-04-26 15:20:18,083 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-04-26 15:20:18,083 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-04-26 15:20:18,084 - httpcore.http11 - DEBUG - send_request_body.complete
2025-04-26 15:20:18,084 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-04-26 15:20:18,147 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Content-Length', b'0'), (b'Connection', b'keep-alive'), (b'Date', b'Sat, 26 Apr 2025 13:20:18 GMT'), (b'X-Cache', b'Error from cloudfront'), (b'Via', b'1.1 3621ca50ba49ddcb4ec6b807edaab51a.cloudfront.net (CloudFront)'), (b'X-Amz-Cf-Pop', b'BUD50-P1'), (b'X-Amz-Cf-Id', b'mJgu3T0wvwXZ-kQOvaRdmmvvVPZXeHwJyQCgrb5Zr-Up9S5GoHawwA==')])
2025-04-26 15:20:18,148 - httpx - INFO - HTTP Request: GET https://restaurant-api.wolt.com/v1/pages/restaurants?lat=47.497913&lon=19.040236 "HTTP/1.1 401 Unauthorized"
2025-04-26 15:20:18,148 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-04-26 15:20:18,148 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-04-26 15:20:18,148 - httpcore.http11 - DEBUG - response_closed.started
2025-04-26 15:20:18,148 - httpcore.http11 - DEBUG - response_closed.complete
2025-04-26 15:20:18,149 - httpcore.connection - DEBUG - close.started
2025-04-26 15:20:18,149 - httpcore.connection - DEBUG - close.complete
2025-04-26 15:20:18,149 - __main__ - ERROR - Wolt API HTTP error: 401 - 
2025-04-26 15:20:18,149 - mcp.server.lowlevel.server - DEBUG - Response sent
2025-04-26 15:21:46,695 - __main__ - INFO - Server stopped
